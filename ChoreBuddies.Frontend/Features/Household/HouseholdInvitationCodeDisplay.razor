@using Shared.Households
@inject IJSRuntime JSRuntime

@if (Household is not null){
<MudPaper Elevation="0" Class="pa-6 mb-8" Style="background:#f5f6f8; border-radius:16px;">
    <MudGrid>
        <MudItem xs="12" md="8" Class="d-flex flex-column justify-center">
            <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                <MudIcon Icon="@Icons.Material.Filled.GroupAdd" Color="Color.Primary" Size="Size.Large" />
                <MudText Typo="Typo.h5" Style="font-weight:800; color:var(--mud-palette-primary-darken-1);">
                    Invite Family Members
                </MudText>
            </MudStack>
            <MudText Typo="Typo.body1" Class="mt-2 ml-1" Color="Color.Secondary">
                    Share this code with your family to let them join <b>@Household.Name</b> instantly.
            </MudText>
        </MudItem>

        <MudItem xs="12" md="4" Class="d-flex align-center justify-center justify-md-end">
            <MudPaper Elevation="0"
                      Class="d-flex align-center px-4 py-2"
                          Style="background-color: #f5f6f8; border: 2px dashed var(--mud-palette-primary); border-radius: 12px;">

                <MudText Typo="Typo.h4"
                         Style="font-family: 'Courier New', monospace; font-weight: 900; letter-spacing: 4px; color: var(--mud-palette-primary);">
                        @Household.invitationCode
                </MudText>

                <MudDivider Vertical="true" FlexItem="true" Class="mx-4 my-1" />

                <MudTooltip Text="Copy to clipboard">
                    <MudIconButton Icon="@Icons.Material.Filled.ContentCopy"
                                   Color="Color.Primary"
                                       OnClick="@(() => CopyToClipboard(Household.invitationCode))"
                                   Size="Size.Medium" />
                </MudTooltip>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudPaper>
}
@code {
    [Parameter]
    public HouseholdDto? Household { get; set; }

    private async Task CopyToClipboard(string code)
    {
        await JSRuntime.InvokeVoidAsync("navigator.clipboard.writeText", code);
    }
}
